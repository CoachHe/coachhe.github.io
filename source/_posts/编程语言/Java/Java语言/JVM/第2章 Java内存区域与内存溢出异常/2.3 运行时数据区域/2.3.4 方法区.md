---
title: 2.3.4 方法区
tags: []
categories:
  - 编程语言
  - Java
  - Java语言
  - JVM
  - 第2章 Java内存区域与内存溢出异常
  - 2.3 运行时数据区域
date: 2022-12-29 15:53:32
---

<img src=" https://coachhe-1305181419.cos.ap-guangzhou.myqcloud.com/%E7%A8%8B%E5%BA%8F%E5%91%98/%E5%B7%A5%E5%85%B7/git/20230102145808.png" width = "80%" />

# 栈、堆和方法区的交互关系


我们来看两张图：

<img src=" https://coachhe-1305181419.cos.ap-guangzhou.myqcloud.com/%E7%A8%8B%E5%BA%8F%E5%91%98/%E5%B7%A5%E5%85%B7/git/20230102233052.png" width = "50%" />


<img src=" https://coachhe-1305181419.cos.ap-guangzhou.myqcloud.com/%E7%A8%8B%E5%BA%8F%E5%91%98/%E5%B7%A5%E5%85%B7/git/20230102233012.png" width = "80%" />

# 方法区的位置

尽管所有方法区在逻辑上是属于堆的一部分，但一些简单的实现可能不会选择去进行垃圾收集或者进行压缩。

但对于 HotSpot JVM 而言，方法区还有一个别名叫做 Non-Heap (非堆)，目的就是要和堆分开。

所以，方法区可以看做是一块独立于 Java 堆的内存空间。

# 方法区的基本理解

- 方法区与 Java 堆一样，是各个线程共享的内存区域
- 方法区在 JVM 启动时被创建，并且它的实际物理内存空间中和 Java 堆区一样都可以是不连续的
- 方法区的大小，和堆空间一样，可以选择固定大小或者可拓展
- 方法区的大小决定了系统可以保存多少类，如果系统定义了太多类，导致方法区溢出，虚拟机同样会抛出内存溢出错误
- 关闭 JVM 就会释放这个区域的内存





