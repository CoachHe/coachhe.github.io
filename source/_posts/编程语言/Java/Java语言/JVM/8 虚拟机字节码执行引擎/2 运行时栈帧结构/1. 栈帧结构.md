---
title: 1. 栈帧结构
tags: []
categories:
  - 编程语言
  - Java
  - Java语言
  - JVM
  - 8 虚拟机字节码执行引擎
  - 2 运行时栈帧结构
date: 2022-12-29 16:03:07
---

每一个方法从调用开始到执行结束的过程，都对应着一个栈帧在虚拟机栈里面从入栈到出栈的过程。

理解：

- 虚拟机栈: 一个程序从 main 方法开始到最终全部执行结束的过程。
- 栈帧: 一个方法从开始到结束的过程。
- main 方法调用的其他方法的数量=栈帧的数量

<img src=" https://coachhe-1305181419.cos.ap-guangzhou.myqcloud.com/Redis/20221206104617.png" width = "50%" />

可以看到，一个虚拟机栈就是一个 `main` 进程从开始运行到最终结束的过程。在 `main` 进程运行时，每调用一次方法，就会生成一个栈帧，每个方法调用时可能会继续调用其他方法，那么会继续生成栈帧，栈帧的生命周期是和方法同步的。

<img src=" https://coachhe-1305181419.cos.ap-guangzhou.myqcloud.com/Redis/20221216120007.png" width = "50%" />

可以看到，栈帧由以下部分组成:

- 局部变量表
- 操作数栈
- 动态连接 (指向运行时常量池的方法引用)
- 方法返回地址
- 额外的附加信息
